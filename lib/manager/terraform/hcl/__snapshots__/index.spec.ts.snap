// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`manager/terraform/extract extractPackageFile() extract helm releases 1`] = `
Object {
  "deps": Array [
    Object {
      "currentValue": "4.0.1",
      "datasource": "helm",
      "depName": undefined,
      "depType": "helm_release",
      "registryUrls": Array [
        "https://charts.helm.sh/stable",
      ],
      "skipReason": "invalid-name",
    },
    Object {
      "currentValue": "5.0.1",
      "datasource": "helm",
      "depName": "redis",
      "depType": "helm_release",
      "registryUrls": Array [
        "https://charts.helm.sh/stable",
      ],
    },
    Object {
      "currentValue": "6.0.1",
      "datasource": "helm",
      "depName": "redis",
      "depType": "helm_release",
      "registryUrls": Array [
        undefined,
      ],
    },
    Object {
      "currentValue": undefined,
      "datasource": "helm",
      "depName": "./charts/example",
      "depType": "helm_release",
      "registryUrls": Array [
        undefined,
      ],
      "skipReason": "local-chart",
    },
    Object {
      "currentValue": "1.0.1",
      "datasource": "helm",
      "depName": "redis",
      "depType": "helm_release",
      "registryUrls": Array [
        "https://charts.helm.sh/stable",
      ],
    },
    Object {
      "currentValue": undefined,
      "datasource": "helm",
      "depName": "redis",
      "depType": "helm_release",
      "registryUrls": Array [
        "https://charts.helm.sh/stable",
      ],
    },
  ],
}
`;

exports[`manager/terraform/extract extractPackageFile() extracts  modules 1`] = `
Object {
  "deps": Array [
    Object {
      "currentValue": "1.28.3",
      "datasource": "terraform-module",
      "depName": "particuleio/addons/kubernetes",
      "depType": "module",
    },
    Object {
      "currentValue": "next",
      "datasource": "github-tags",
      "depName": "github.com/hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "0.1.0",
      "datasource": "terraform-module",
      "depName": "hashicorp/consul/aws",
      "depType": "module",
    },
    Object {
      "currentValue": "v2.0.0",
      "datasource": "github-tags",
      "depName": "github.com/hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "~> 1.1.0",
      "datasource": "terraform-module",
      "depName": "app.terraform.io/example-corp/k8s-cluster/azurerm",
      "depType": "module",
      "registryUrls": Array [
        "https://app.terraform.io",
      ],
    },
    Object {
      "currentValue": "~> 1.1",
      "datasource": "terraform-module",
      "depName": "app.terraform.io/example-corp/k8s-cluster/azurerm",
      "depType": "module",
      "registryUrls": Array [
        "https://app.terraform.io",
      ],
    },
    Object {
      "currentValue": "~~ 1.1",
      "datasource": "terraform-module",
      "depName": "app.terraform.io/example-corp/k8s-cluster/azurerm",
      "depType": "module",
      "registryUrls": Array [
        "https://app.terraform.io",
      ],
    },
    Object {
      "currentValue": ">= 1.0.0, <= 2.0.0",
      "datasource": "terraform-module",
      "depName": "hashicorp/consul/aws",
      "depType": "module",
    },
    Object {
      "currentValue": "v0.1.0",
      "datasource": "github-tags",
      "depName": "github.com/tieto-cem/terraform-aws-ecs-task-definition",
      "depType": "module",
      "lookupName": "tieto-cem/terraform-aws-ecs-task-definition",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "github-tags",
      "depName": "github.com/hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": undefined,
      "skipReason": "no-source",
    },
    Object {
      "currentValue": undefined,
      "skipReason": "local",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "github-tags",
      "depName": "github.com/hashicorp/example.2.3",
      "depType": "module",
      "lookupName": "hashicorp/example.2.3",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "github-tags",
      "depName": "github.com/hashicorp/example.2.3",
      "depType": "module",
      "lookupName": "hashicorp/example.2.3",
    },
    Object {
      "currentValue": "tfmodule_one-v0.0.9",
      "datasource": "github-tags",
      "depName": "github.com/githubuser/myrepo",
      "depType": "module",
      "lookupName": "githubuser/myrepo",
    },
    Object {
      "currentValue": "v0.1.0",
      "datasource": "github-tags",
      "depName": "github.com/tieto-cem/terraform-aws-ecs-task-definition",
      "depType": "module",
      "lookupName": "tieto-cem/terraform-aws-ecs-task-definition",
    },
    Object {
      "currentValue": "<= 2.4.0",
      "datasource": "terraform-module",
      "depName": "terraform-aws-modules/security-group/aws",
      "depType": "module",
    },
    Object {
      "currentValue": undefined,
      "datasource": "terraform-module",
      "depName": "terraform-aws-modules/security-group/aws",
      "depType": "module",
    },
  ],
}
`;

exports[`manager/terraform/extract extractPackageFile() extracts bitbucket modules 1`] = `
Object {
  "deps": Array [
    Object {
      "currentValue": "v1.0.0",
      "datasource": "bitbucket-tags",
      "depName": "hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "bitbucket-tags",
      "depName": "hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "bitbucket-tags",
      "depName": "hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "bitbucket-tags",
      "depName": "hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "bitbucket-tags",
      "depName": "hashicorp/example",
      "depType": "module",
      "lookupName": "hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "git-tags",
      "depName": "bitbucket.com/hashicorp/example",
      "depType": "module",
      "lookupName": "https://bitbucket.com/hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.0",
      "datasource": "git-tags",
      "depName": "bitbucket.com/hashicorp/example",
      "depType": "module",
      "lookupName": "https://bitbucket.com/hashicorp/example",
    },
    Object {
      "currentValue": "next",
      "datasource": "git-tags",
      "depName": "bitbucket.com/hashicorp/example",
      "depType": "module",
      "lookupName": "https://bitbucket.com/hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.2",
      "datasource": "git-tags",
      "depName": "bitbucket.com/hashicorp/example",
      "depType": "module",
      "lookupName": "http://bitbucket.com/hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.3",
      "datasource": "git-tags",
      "depName": "bitbucket.com/hashicorp/example",
      "depType": "module",
      "lookupName": "ssh://git@bitbucket.com/hashicorp/example",
    },
    Object {
      "currentValue": "v1.0.1",
      "datasource": "git-tags",
      "depName": "bitbucket.com/hashicorp/example",
      "depType": "module",
      "lookupName": "https://bitbucket.com/hashicorp/example",
    },
  ],
}
`;

exports[`manager/terraform/extract extractPackageFile() extracts providers 1`] = `
Object {
  "deps": Array [
    Object {
      "currentValue": ">= 2.7.0",
      "datasource": "terraform-provider",
      "depName": "aws",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/aws",
    },
    Object {
      "currentValue": ">= 2.0.0",
      "datasource": "terraform-provider",
      "depName": "azurerm",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/azurerm",
    },
    Object {
      "currentValue": "2.7.0",
      "datasource": "terraform-provider",
      "depName": "aws",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/aws",
    },
    Object {
      "currentValue": "=2.27.0",
      "datasource": "terraform-provider",
      "depName": "azurerm",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/azurerm",
    },
    Object {
      "currentValue": "2.7.2",
      "datasource": "terraform-provider",
      "depName": "docker",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/docker",
      "registryUrls": Array [
        "https://releases.hashicorp.com",
      ],
    },
    Object {
      "currentValue": "1.2.4",
      "datasource": "terraform-provider",
      "depName": "helm",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/helm",
    },
    Object {
      "currentValue": "1.2.4",
      "datasource": "terraform-provider",
      "depName": "invalid",
      "depType": "required_provider",
      "skipReason": "unsupported-url",
    },
    Object {
      "currentValue": ">= 1.0",
      "datasource": "terraform-provider",
      "depName": "kubernetes",
      "depType": "required_provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/kubernetes",
      "registryUrls": Array [
        "https://terraform.example.com",
      ],
    },
    Object {
      "currentValue": ">= 0.13",
      "datasource": "github-tags",
      "depName": "hashicorp/terraform",
      "depType": "required_version",
      "extractVersion": "v(?<version>.*)$",
    },
    Object {
      "currentValue": "1.36.1",
      "datasource": "terraform-provider",
      "depName": "azurerm",
      "depType": "provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/azurerm",
    },
    Object {
      "currentValue": "=2.4",
      "datasource": "terraform-provider",
      "depName": "gitlab",
      "depType": "provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/gitlab",
    },
    Object {
      "currentValue": "=1.3",
      "datasource": "terraform-provider",
      "depName": "gitlab",
      "depType": "provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/gitlab",
    },
    Object {
      "currentValue": undefined,
      "datasource": "terraform-provider",
      "depName": "helm",
      "depType": "provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/helm",
      "skipReason": "no-version",
    },
    Object {
      "currentValue": "V1.9",
      "datasource": "terraform-provider",
      "depName": "newrelic",
      "depType": "provider",
      "lockedVersion": undefined,
      "lookupName": "hashicorp/newrelic",
    },
  ],
}
`;

exports[`manager/terraform/extract extractPackageFile() test terraform block with only requirement_terraform_version 1`] = `
Object {
  "deps": Array [
    Object {
      "currentValue": "1.0.0",
      "datasource": "github-tags",
      "depName": "hashicorp/terraform",
      "depType": "required_version",
      "extractVersion": "v(?<version>.*)$",
    },
  ],
}
`;

exports[`manager/terraform/hcl parseHCL() should return flat modules 1`] = `
Object {
  "module": Object {
    "bar": Array [
      Object {
        "source": "github.com/hashicorp/example?ref=next",
      },
    ],
    "consul": Array [
      Object {
        "source": "hashicorp/consul/aws",
        "version": "0.1.0",
      },
    ],
    "foo": Array [
      Object {
        "source": "github.com/hashicorp/example?ref=v1.0.0",
      },
    ],
    "repo-with-dot": Array [
      Object {
        "source": "github.com/hashicorp/example.2.3?ref=v1.0.0",
      },
    ],
    "repo-with-dot-and-git-suffix": Array [
      Object {
        "source": "github.com/hashicorp/example.2.3.git?ref=v1.0.0",
      },
    ],
    "repo-with-non-semver-ref": Array [
      Object {
        "source": "github.com/githubuser/myrepo//terraform/modules/moduleone?ref=tfmodule_one-v0.0.9",
      },
    ],
  },
}
`;

exports[`manager/terraform/hcl parseHCL() should return nested terraform block 1`] = `
Object {
  "terraform": Array [
    Object {
      "required_providers": Array [
        Object {
          "aws": Object {
            "source": "aws",
            "version": "~> 3.0",
          },
          "azurerm": Object {
            "version": "~> 2.50.0",
          },
          "kubernetes": Object {
            "source": "terraform.example.com/example/kubernetes",
            "version": ">= 1.0",
          },
        },
      ],
    },
  ],
}
`;

exports[`manager/terraform/hcl parseHCL() should return resource blocks 1`] = `
Object {
  "resource": Object {
    "docker_container": Object {
      "foo": Array [
        Object {
          "image": "nginx:1.7.8",
          "name": "foo",
        },
      ],
      "invalid": Array [
        Object {
          "name": "foo",
        },
      ],
    },
    "docker_service": Object {
      "foo": Array [
        Object {
          "endpoint_spec": Array [
            Object {
              "ports": Array [
                Object {
                  "target_port": "8080",
                },
              ],
            },
          ],
          "name": "foo-service",
          "task_spec": Array [
            Object {
              "container_spec": Array [
                Object {
                  "image": "repo.mycompany.com:8080/foo-service:v1",
                },
              ],
            },
          ],
        },
      ],
    },
  },
}
`;

exports[`manager/terraform/hcl parseJSON should parse json 1`] = `
Object {
  "resource": Object {
    "aws_instance": Object {
      "example": Object {
        "provisioner": Array [
          Object {
            "local-exec": Object {
              "command": "echo 'Hello World' >example.txt",
            },
          },
          Object {
            "file": Object {
              "destination": "/tmp/example.txt",
              "source": "example.txt",
            },
          },
          Object {
            "remote-exec": Object {
              "inline": Array [
                "sudo install-something -f /tmp/example.txt",
              ],
            },
          },
        ],
      },
    },
  },
}
`;

exports[`manager/terraform/hcl/index parseHCL() should return flat modules 1`] = `
Object {
  "module": Object {
    "bar": Array [
      Object {
        "source": "github.com/hashicorp/example?ref=next",
      },
    ],
    "consul": Array [
      Object {
        "source": "hashicorp/consul/aws",
        "version": "0.1.0",
      },
    ],
    "foo": Array [
      Object {
        "source": "github.com/hashicorp/example?ref=v1.0.0",
      },
    ],
    "repo-with-dot": Array [
      Object {
        "source": "github.com/hashicorp/example.2.3?ref=v1.0.0",
      },
    ],
    "repo-with-dot-and-git-suffix": Array [
      Object {
        "source": "github.com/hashicorp/example.2.3.git?ref=v1.0.0",
      },
    ],
    "repo-with-non-semver-ref": Array [
      Object {
        "source": "github.com/githubuser/myrepo//terraform/modules/moduleone?ref=tfmodule_one-v0.0.9",
      },
    ],
  },
}
`;

exports[`manager/terraform/hcl/index parseHCL() should return nested terraform block 1`] = `
Object {
  "terraform": Array [
    Object {
      "required_providers": Array [
        Object {
          "aws": Object {
            "source": "aws",
            "version": "~> 3.0",
          },
          "azurerm": Object {
            "version": "~> 2.50.0",
          },
          "kubernetes": Object {
            "source": "terraform.example.com/example/kubernetes",
            "version": ">= 1.0",
          },
        },
      ],
    },
  ],
}
`;

exports[`manager/terraform/hcl/index parseHCL() should return resource blocks 1`] = `
Object {
  "resource": Object {
    "docker_container": Object {
      "foo": Array [
        Object {
          "image": "nginx:1.7.8",
          "name": "foo",
        },
      ],
      "invalid": Array [
        Object {
          "name": "foo",
        },
      ],
    },
    "docker_service": Object {
      "foo": Array [
        Object {
          "endpoint_spec": Array [
            Object {
              "ports": Array [
                Object {
                  "target_port": "8080",
                },
              ],
            },
          ],
          "name": "foo-service",
          "task_spec": Array [
            Object {
              "container_spec": Array [
                Object {
                  "image": "repo.mycompany.com:8080/foo-service:v1",
                },
              ],
            },
          ],
        },
      ],
    },
  },
}
`;

exports[`manager/terraform/hcl/index parseJSON should parse json 1`] = `
Object {
  "resource": Object {
    "aws_instance": Object {
      "example": Object {
        "provisioner": Array [
          Object {
            "local-exec": Object {
              "command": "echo 'Hello World' >example.txt",
            },
          },
          Object {
            "file": Object {
              "destination": "/tmp/example.txt",
              "source": "example.txt",
            },
          },
          Object {
            "remote-exec": Object {
              "inline": Array [
                "sudo install-something -f /tmp/example.txt",
              ],
            },
          },
        ],
      },
    },
  },
}
`;
